SURGICAL TECHNIQUES APP - Progress Tracker
==========================================
Last Updated: 2026-02-09

## Current State
- Web app: DEPLOYED to Cloudflare Pages (surgicaltechniques.app)
- iOS app: BUILD SUCCESSFUL, tested in simulator
- Android app: Pending (Android Studio not yet installed)
- Backend: Supabase (free tier)

## What's Built
- Full authentication flow (email + Google OAuth)
- Resource management with specialty/subspecialty filtering
- Admin dashboard with analytics
- Role-based access control (super_admin > specialty_admin > subspecialty_admin > user)
- 1:1 messaging between admins (including peer subspecialty admins)
- Favorites, notes, upcoming cases for users
- Legal pages with contact emails configured
- Onboarding flow
- Mobile app via Capacitor (iOS tested, Android ready)
- Google Calendar integration (connect, create events, delete events, disconnect)
- Subspecialty Companies + Rep Platform (Contact Rep button, RepView, inquiry management)

## Completed This Session (2026-02-09)
- [x] Restored working Google Calendar OAuth (was broken by failed Supabase Vault attempt)
- [x] Implemented AES-256-GCM application-level token encryption in all 4 Edge Functions
- [x] Added access_token_iv / refresh_token_iv columns to user_calendar_connections
- [x] Stored TOKEN_ENCRYPTION_KEY as Supabase secret
- [x] Fixed calendar event end time bug (slice 0,16 → 0,19 was causing 400 from Google API)
- [x] Fixed calendar tooltip showing wrong time (UTC parse bug → now uses local time parts)
- [x] Confirmed Rep Platform and Contact Rep button working end-to-end
- [x] Completed CALENDAR_ENCRYPTION_FIX_PLAN.md — all 3 phases done:
  - Phase 1: Calendar restored (plaintext rollback)
  - Phase 2: AES-256-GCM encryption + token refresh implemented
  - Phase 3: Vault artifacts dropped (functions, trigger, columns)

## In Progress
- Android build setup (need Android Studio installation)

## Blocked
- Android build: Need Android Studio installed

## What's Next
1. Install Android Studio and test Android build
2. Create custom app icons (1024x1024 PNG)
3. Create custom splash screens
4. Set up Apple Developer account ($99/yr)
5. Set up Google Play Console ($25 one-time)
6. Prepare app store metadata and screenshots
7. Submit to App Store and Google Play

## Architecture Note
Single codebase serves three platforms:
- Web: dist/ deployed to Cloudflare Pages
- iOS: ios/ built via Xcode
- Android: android/ built via Android Studio
